<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleIdentifier</key>
    <string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>

    <key>CFBundleName</key>
    <string>OxVaultFSExtension</string>

    <key>CFBundleDisplayName</key>
    <string>OxVault File System</string>

    <key>CFBundleVersion</key>
    <string>1</string>

    <key>CFBundleShortVersionString</key>
    <string>1.0.0</string>

    <key>CFBundleExecutable</key>
    <string>$(EXECUTABLE_NAME)</string>

    <key>CFBundlePackageType</key>
    <string>XPC!</string>

    <key>LSMinimumSystemVersion</key>
    <string>26.0</string>

    <!-- XPC Service for CLI/Desktop communication -->
    <key>XPCService</key>
    <dict>
        <key>ServiceType</key>
        <string>Application</string>
    </dict>

    <!-- Mach service name for XPC connections -->
    <key>MachServices</key>
    <dict>
        <key>com.agucova.oxcrypt.desktop.fsextension.xpc</key>
        <true/>
    </dict>

    <!-- FSKit Extension Configuration (ExtensionKit format) -->
    <key>EXAppExtensionAttributes</key>
    <dict>
        <key>EXExtensionPointIdentifier</key>
        <string>com.apple.fskit.fsmodule</string>

        <!-- Principal class for FSKit to instantiate -->
        <key>EXExtensionPrincipalClass</key>
        <string>OxVaultFSExtension</string>

        <key>FSRequiresSecurityScopedPathURLResources</key>
        <false/>

        <key>FSFileSystemType</key>
        <string>oxcrypt</string>

        <key>FSShortName</key>
        <string>oxcrypt</string>

        <!-- Mount option syntax for mount -t oxcrypt -->
        <key>FSActivateOptionSyntax</key>
        <dict>
            <key>shortOptions</key>
            <string>o:</string>
        </dict>

        <key>FSPersonalities</key>
        <dict>
            <key>CryptomatorVault</key>
            <dict>
                <key>FSName</key>
                <string>Cryptomator Vault</string>
                <key>FSfileObjectsAreCaseSensitive</key>
                <true/>
            </dict>
        </dict>

        <key>FSMediaTypes</key>
        <dict/>

        <!-- Support path URL resources (local directories) -->
        <key>FSSupportsPathURLs</key>
        <true/>
        <key>FSSupportsBlockResources</key>
        <true/>
        <!-- Enable generic URL resources for oxcrypt:// scheme -->
        <key>FSSupportsGenericURLResources</key>
        <true/>
        <!-- URL schemes this extension handles -->
        <key>FSSupportedSchemes</key>
        <array>
            <string>oxcrypt</string>
        </array>
        <key>FSSupportsServerURLs</key>
        <false/>
    </dict>
</dict>
</plist>
