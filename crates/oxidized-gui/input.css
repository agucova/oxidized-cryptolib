@import "tailwindcss";
@source "./src/**/*.{rs,html,css}";

/* Theme switching support
   - .theme-dark: Force dark mode regardless of system preference
   - .theme-light: Force light mode regardless of system preference
   - No class: Follow system preference (default behavior)

   The dark: variant in Tailwind uses media queries by default.
   For forced themes, we use CSS custom properties from main.css.
   The .theme-dark and .theme-light classes override CSS variables,
   and we add these extra rules for Tailwind utility compatibility.
*/

/* Custom base styles */
@layer base {
  body {
    @apply bg-white text-gray-900 antialiased;
  }

  @media (prefers-color-scheme: dark) {
    body {
      @apply bg-neutral-900 text-gray-100;
    }
  }

  /* Force light mode - override system dark preference */
  .theme-light,
  .theme-light body {
    @apply bg-white text-gray-900;
    color-scheme: light;
  }

  /* Force dark mode - apply regardless of system preference */
  .theme-dark,
  .theme-dark body {
    @apply bg-neutral-900 text-gray-100;
    color-scheme: dark;
  }
}

/* ============================================
   Theme Override Utilities

   These rules override Tailwind's media query-based dark: variants when
   .theme-light or .theme-dark is applied to a parent element.
   This allows manual theme switching regardless of system preference.

   Note: We use !important to override the media query specificity.
   ============================================ */

/* Light mode overrides - force light colors even when system prefers dark */
.theme-light .dark\:bg-neutral-900 { background-color: rgb(255 255 255) !important; }
.theme-light .dark\:bg-neutral-800 { background-color: rgb(249 250 251) !important; }
.theme-light .dark\:bg-neutral-700 { background-color: rgb(243 244 246) !important; }
.theme-light .dark\:bg-neutral-600 { background-color: rgb(229 231 235) !important; }
.theme-light .dark\:bg-green-900\/30 { background-color: rgb(220 252 231) !important; }
.theme-light .dark\:bg-blue-900\/30 { background-color: rgb(239 246 255) !important; }
.theme-light .dark\:bg-blue-900\/20 { background-color: rgb(239 246 255) !important; }

.theme-light .dark\:text-gray-100 { color: rgb(17 24 39) !important; }
.theme-light .dark\:text-gray-200 { color: rgb(55 65 81) !important; }
.theme-light .dark\:text-gray-300 { color: rgb(75 85 99) !important; }
.theme-light .dark\:text-gray-400 { color: rgb(107 114 128) !important; }
.theme-light .dark\:text-gray-500 { color: rgb(107 114 128) !important; }
.theme-light .dark\:text-blue-300 { color: rgb(29 78 216) !important; }
.theme-light .dark\:text-blue-400 { color: rgb(37 99 235) !important; }
.theme-light .dark\:text-red-400 { color: rgb(220 38 38) !important; }
.theme-light .dark\:text-red-300 { color: rgb(185 28 28) !important; }
.theme-light .dark\:text-green-300 { color: rgb(21 128 61) !important; }
.theme-light .dark\:text-green-400 { color: rgb(22 163 74) !important; }
.theme-light .dark\:text-amber-300 { color: rgb(180 83 9) !important; }
.theme-light .dark\:text-amber-400 { color: rgb(217 119 6) !important; }

.theme-light .dark\:border-neutral-700 { border-color: rgb(229 231 235) !important; }
.theme-light .dark\:border-neutral-800 { border-color: rgb(243 244 246) !important; }
.theme-light .dark\:border-neutral-600 { border-color: rgb(209 213 219) !important; }
.theme-light .dark\:border-neutral-500 { border-color: rgb(156 163 175) !important; }
.theme-light .dark\:border-blue-400 { border-color: rgb(59 130 246) !important; }
.theme-light .dark\:border-blue-800 { border-color: rgb(191 219 254) !important; }

.theme-light .dark\:bg-red-900\/30 { background-color: rgb(254 242 242) !important; }

.theme-light .dark\:hover\:bg-neutral-700:hover { background-color: rgb(243 244 246) !important; }
.theme-light .dark\:hover\:bg-neutral-600:hover { background-color: rgb(229 231 235) !important; }
.theme-light .dark\:hover\:bg-blue-900\/20:hover { background-color: rgb(239 246 255) !important; }
.theme-light .dark\:hover\:text-gray-200:hover { color: rgb(55 65 81) !important; }
.theme-light .dark\:hover\:text-gray-300:hover { color: rgb(75 85 99) !important; }
.theme-light .dark\:hover\:text-red-300:hover { color: rgb(185 28 28) !important; }
.theme-light .dark\:hover\:text-blue-300:hover { color: rgb(29 78 216) !important; }

/* Dark mode overrides - force dark colors even when system prefers light */
.theme-dark .bg-white { background-color: rgb(23 23 23) !important; }
.theme-dark .bg-gray-50 { background-color: rgb(38 38 38) !important; }
.theme-dark .bg-gray-100 { background-color: rgb(64 64 64) !important; }
.theme-dark .bg-gray-200 { background-color: rgb(82 82 82) !important; }
.theme-dark .bg-green-100 { background-color: rgba(34 197 94 / 0.3) !important; }
.theme-dark .bg-blue-50 { background-color: rgba(59 130 246 / 0.3) !important; }

.theme-dark .text-gray-900 { color: rgb(250 250 250) !important; }
.theme-dark .text-gray-800 { color: rgb(229 229 229) !important; }
.theme-dark .text-gray-700 { color: rgb(212 212 212) !important; }
.theme-dark .text-gray-600 { color: rgb(163 163 163) !important; }
.theme-dark .text-blue-700 { color: rgb(147 197 253) !important; }
.theme-dark .text-blue-600 { color: rgb(96 165 250) !important; }
.theme-dark .text-blue-800 { color: rgb(191 219 254) !important; }
.theme-dark .text-red-600 { color: rgb(248 113 113) !important; }
.theme-dark .text-red-700 { color: rgb(252 165 165) !important; }
.theme-dark .text-green-700 { color: rgb(134 239 172) !important; }
.theme-dark .text-green-800 { color: rgb(187 247 208) !important; }
.theme-dark .text-amber-700 { color: rgb(252 211 77) !important; }
.theme-dark .text-amber-800 { color: rgb(253 230 138) !important; }

.theme-dark .border-gray-200 { border-color: rgb(64 64 64) !important; }
.theme-dark .border-gray-100 { border-color: rgb(38 38 38) !important; }
.theme-dark .border-gray-300 { border-color: rgb(82 82 82) !important; }
.theme-dark .border-blue-500 { border-color: rgb(96 165 250) !important; }
.theme-dark .border-blue-200 { border-color: rgb(30 64 175) !important; }

.theme-dark .bg-green-100 { background-color: rgba(34 197 94 / 0.3) !important; }
.theme-dark .bg-red-100 { background-color: rgba(239 68 68 / 0.3) !important; }

.theme-dark .text-green-600 { color: rgb(74 222 128) !important; }
.theme-dark .text-green-700 { color: rgb(134 239 172) !important; }
.theme-dark .text-amber-600 { color: rgb(251 191 36) !important; }
.theme-dark .text-amber-700 { color: rgb(252 211 77) !important; }

.theme-dark .hover\:bg-gray-50:hover { background-color: rgb(38 38 38) !important; }
.theme-dark .hover\:bg-gray-100:hover { background-color: rgb(64 64 64) !important; }
.theme-dark .hover\:bg-gray-200:hover { background-color: rgb(82 82 82) !important; }
.theme-dark .hover\:bg-blue-50:hover { background-color: rgba(59 130 246 / 0.2) !important; }
.theme-dark .hover\:text-gray-700:hover { color: rgb(229 229 229) !important; }
.theme-dark .hover\:text-gray-800:hover { color: rgb(250 250 250) !important; }
.theme-dark .hover\:text-red-700:hover { color: rgb(252 165 165) !important; }
.theme-dark .hover\:text-blue-700:hover { color: rgb(147 197 253) !important; }
.theme-dark .hover\:text-blue-600:hover { color: rgb(96 165 250) !important; }
.theme-dark .hover\:bg-red-600:hover { background-color: rgb(220 38 38) !important; }
.theme-dark .hover\:bg-green-600:hover { background-color: rgb(22 163 74) !important; }

/* Custom component classes for common patterns */
@layer components {
  /* Dialog patterns */
  .dialog-backdrop {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-50;
  }

  .dialog {
    @apply bg-white rounded-xl shadow-2xl max-w-[90vw] overflow-hidden;
  }

  @media (prefers-color-scheme: dark) {
    .dialog {
      @apply bg-neutral-800;
    }
  }
  .theme-dark .dialog { @apply bg-neutral-800; }
  .theme-light .dialog { @apply bg-white; }

  .dialog-body {
    @apply p-6;
  }

  .dialog-footer {
    @apply px-6 py-4 bg-gray-50 flex justify-end gap-3;
  }

  @media (prefers-color-scheme: dark) {
    .dialog-footer {
      @apply bg-neutral-900;
    }
  }
  .theme-dark .dialog-footer { @apply bg-neutral-900; }
  .theme-light .dialog-footer { @apply bg-gray-50; }

  /* Card styles */
  .card {
    @apply bg-white rounded-lg border border-gray-200;
  }

  @media (prefers-color-scheme: dark) {
    .card {
      @apply bg-neutral-800 border-neutral-700;
    }
  }
  .theme-dark .card { @apply bg-neutral-800 border-neutral-700; }
  .theme-light .card { @apply bg-white border-gray-200; }

  .card-elevated {
    @apply bg-white rounded-lg border border-gray-200 shadow-md hover:shadow-lg transition-shadow;
  }

  @media (prefers-color-scheme: dark) {
    .card-elevated {
      @apply bg-neutral-800 border-neutral-700;
    }
  }
  .theme-dark .card-elevated { @apply bg-neutral-800 border-neutral-700; }
  .theme-light .card-elevated { @apply bg-white border-gray-200; }

  /* Alert styles */
  .alert {
    @apply p-3 rounded-lg text-sm flex items-start gap-2;
  }

  .alert-info {
    @apply p-3 rounded-lg text-sm flex items-start gap-2 bg-blue-50 text-blue-800 border border-blue-200;
  }

  @media (prefers-color-scheme: dark) {
    .alert-info {
      @apply bg-blue-900/30 text-blue-200 border-blue-800;
    }
  }
  .theme-dark .alert-info { @apply bg-blue-900/30 text-blue-200 border-blue-800; }
  .theme-light .alert-info { @apply bg-blue-50 text-blue-800 border-blue-200; }

  .alert-warning {
    @apply p-3 rounded-lg text-sm flex items-start gap-2 bg-amber-50 text-amber-800 border border-amber-200;
  }

  @media (prefers-color-scheme: dark) {
    .alert-warning {
      @apply bg-amber-900/30 text-amber-200 border-amber-800;
    }
  }
  .theme-dark .alert-warning { @apply bg-amber-900/30 text-amber-200 border-amber-800; }
  .theme-light .alert-warning { @apply bg-amber-50 text-amber-800 border-amber-200; }

  .alert-danger {
    @apply p-3 rounded-lg text-sm flex items-start gap-2 bg-red-50 text-red-800 border border-red-200;
  }

  @media (prefers-color-scheme: dark) {
    .alert-danger {
      @apply bg-red-900/30 text-red-200 border-red-800;
    }
  }
  .theme-dark .alert-danger { @apply bg-red-900/30 text-red-200 border-red-800; }
  .theme-light .alert-danger { @apply bg-red-50 text-red-800 border-red-200; }

  .alert-success {
    @apply p-3 rounded-lg text-sm flex items-start gap-2 bg-green-50 text-green-800 border border-green-200;
  }

  @media (prefers-color-scheme: dark) {
    .alert-success {
      @apply bg-green-900/30 text-green-200 border-green-800;
    }
  }
  .theme-dark .alert-success { @apply bg-green-900/30 text-green-200 border-green-800; }
  .theme-light .alert-success { @apply bg-green-50 text-green-800 border-green-200; }

  /* Badge styles */
  .badge {
    @apply text-xs px-2 py-0.5 rounded-full font-medium;
  }

  .badge-success {
    @apply text-xs px-2 py-0.5 rounded-full font-medium bg-green-100 text-green-700;
  }

  @media (prefers-color-scheme: dark) {
    .badge-success {
      @apply bg-green-900/50 text-green-300;
    }
  }
  .theme-dark .badge-success { @apply bg-green-900/50 text-green-300; }
  .theme-light .badge-success { @apply bg-green-100 text-green-700; }

  .badge-warning {
    @apply text-xs px-2 py-0.5 rounded-full font-medium bg-amber-100 text-amber-700;
  }

  @media (prefers-color-scheme: dark) {
    .badge-warning {
      @apply bg-amber-900/50 text-amber-300;
    }
  }
  .theme-dark .badge-warning { @apply bg-amber-900/50 text-amber-300; }
  .theme-light .badge-warning { @apply bg-amber-100 text-amber-700; }

  .badge-danger {
    @apply text-xs px-2 py-0.5 rounded-full font-medium bg-red-100 text-red-700;
  }

  @media (prefers-color-scheme: dark) {
    .badge-danger {
      @apply bg-red-900/50 text-red-300;
    }
  }
  .theme-dark .badge-danger { @apply bg-red-900/50 text-red-300; }
  .theme-light .badge-danger { @apply bg-red-100 text-red-700; }

  /* Dropzone for file selection */
  .dropzone {
    @apply flex flex-col items-center p-8 border-2 border-dashed border-gray-300 rounded-lg mb-5;
  }

  @media (prefers-color-scheme: dark) {
    .dropzone {
      @apply border-neutral-600;
    }
  }
  .theme-dark .dropzone { @apply border-neutral-600; }
  .theme-light .dropzone { @apply border-gray-300; }

  /* Spinner animation */
  .spinner {
    @apply w-10 h-10 border-[3px] border-gray-200 border-t-blue-500 rounded-full animate-spin;
  }

  @media (prefers-color-scheme: dark) {
    .spinner {
      @apply border-neutral-600;
    }
  }
  .theme-dark .spinner { @apply border-neutral-600; }
  .theme-light .spinner { @apply border-gray-200; }

  .spinner-sm {
    @apply w-4 h-4 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin;
  }

  /* Tab styles */
  .tabs {
    @apply flex gap-0;
  }

  .tab {
    @apply flex items-center gap-1.5 px-4 py-2.5 border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition-colors cursor-pointer bg-transparent text-sm -mb-px;
  }

  @media (prefers-color-scheme: dark) {
    .tab {
      @apply text-gray-400 hover:text-gray-200;
    }
  }
  .theme-dark .tab { @apply text-gray-400 hover:text-gray-200; }
  .theme-light .tab { @apply text-gray-500 hover:text-gray-700; }

  .tab.active {
    @apply text-blue-500 border-blue-500 font-medium;
  }

  /* Form input styles */
  .input {
    @apply w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500;
  }

  @media (prefers-color-scheme: dark) {
    .input {
      @apply bg-neutral-800 border-neutral-600 text-gray-100 focus:border-blue-400 focus:ring-blue-400;
    }
  }
  .theme-dark .input { @apply bg-neutral-800 border-neutral-600 text-gray-100 focus:border-blue-400 focus:ring-blue-400; }
  .theme-light .input { @apply bg-white border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500; }

  .input-error {
    @apply border-red-500 focus:border-red-500 focus:ring-red-500;
  }

  .input-group {
    @apply relative;
  }

  .input-icon {
    @apply absolute right-2 top-1/2 -translate-y-1/2;
  }

  .label {
    @apply block text-sm font-medium text-gray-600 mb-1.5;
  }

  @media (prefers-color-scheme: dark) {
    .label {
      @apply text-gray-300;
    }
  }
  .theme-dark .label { @apply text-gray-300; }
  .theme-light .label { @apply text-gray-600; }

  /* Button styles */
  .btn {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2;
  }

  .btn-primary {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 bg-blue-500 text-white hover:bg-blue-600;
  }

  .btn-secondary {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300;
  }

  @media (prefers-color-scheme: dark) {
    .btn-secondary {
      @apply bg-neutral-700 text-gray-200 hover:bg-neutral-600 border-neutral-600;
    }
  }
  .theme-dark .btn-secondary { @apply bg-neutral-700 text-gray-200 hover:bg-neutral-600 border-neutral-600; }
  .theme-light .btn-secondary { @apply bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-300; }

  .btn-danger {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 bg-red-500 text-white hover:bg-red-600;
  }

  .btn-success {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 bg-green-500 text-white hover:bg-green-600;
  }

  .btn-ghost {
    @apply px-4 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2 bg-transparent text-gray-600 hover:bg-gray-100;
  }

  @media (prefers-color-scheme: dark) {
    .btn-ghost {
      @apply text-gray-300 hover:bg-neutral-700;
    }
  }
  .theme-dark .btn-ghost { @apply text-gray-300 hover:bg-neutral-700; }
  .theme-light .btn-ghost { @apply text-gray-600 hover:bg-gray-100; }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }
}
